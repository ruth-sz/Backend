<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Pesquisa Meu CEP</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<!-- Obs: ao inspecionar a página, caso exiba o erro: Unchecked runtime.lastError: The message port closed..., significa
que alguma extensão do seu navegador está tentando se comunicar com a página. Favor ignorar, 
testar em aba anônima ou desativar as extensões temporariamente para evitar poluição no console-->
		<script>
			function getDadosEnderecoPorCEP(cep) {
			let url = "https://brasilapi.com.br/api/cep/v1/" + cep;

			fetch(url)
				.then(response => {
				if (!response.ok) {
					throw new Error("CEP não encontrado!");
				}
				return response.json();
				})
				.then(data => {
				document.getElementById("endereco").value = data.street || "";
				document.getElementById("bairro").value = data.neighborhood || "";
				document.getElementById("cidade").value = data.city || "";
				document.getElementById("uf").value = data.state || "";
				})
				.catch(error => {
				console.error("Erro ao buscar CEP:", error);
				alert("CEP inválido ou não encontrado.");
				//se tiver erro deixa os campos vazios
				document.getElementById("endereco").value = "";
				document.getElementById("bairro").value = "";
				document.getElementById("cidade").value = "";
				document.getElementById("uf").value = "";
				});
			}
		</script>
		</head>
	<body>
		<nav class="navbar navbar-light bg-light mb-4">
			<div class="container">
			<div class="navbar-brand mb-0 h1">
				<h3>Pesquisa Meu CEP</h3>
			</div>
			</div>
		</nav>

		<div class="container">
			<div class="row form-group">
			<div class="col-sm-3">
				<input
				type="text"
				class="form-control"
				placeholder="CEP"
				onblur="getDadosEnderecoPorCEP(this.value)"
				/>
			</div>
			<div class="col-sm-9">
				<input
				type="text"
				class="form-control"
				placeholder="Endereço"
				readonly
				id="endereco"
				/>
			</div>
			</div>

			<div class="row form-group">
			<div class="col-sm-6">
				<input
				type="text"
				class="form-control"
				placeholder="Bairro"
				readonly
				id="bairro"
				/>
			</div>
			<div class="col-sm-4">
				<input
				type="text"
				class="form-control"
				placeholder="Cidade"
				readonly
				id="cidade"
				/>
			</div>

			<div class="col-sm-2">
				<input
				type="text"
				class="form-control"
				placeholder="UF"
				readonly
				id="uf"
				/>
			</div>
			</div>
		</div>
	</body>
</html>
